<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Welcome to Camp Acey | Bachelorette Weekend</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --pine: #1f3b32;
      --pine-light: #2d5243;
      --cream: #faf5f0;
      --snow: #f3f7fb;
      --accent: #c35b4c;
      --gold: #d9a441;
      --text: #1f2528;
      --muted: #6b7a86;
      --card-radius: 18px;
      --shadow-soft: 0 16px 30px rgba(0,0,0,0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
      color: var(--text);
      min-height: 100vh;
    }

    .page-wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 18px 60px;
    }

    .glass-card {
      background: rgba(250, 245, 240, 0.96);
      border-radius: 26px;
      box-shadow: var(--shadow-soft);
      padding: 24px 20px 32px;
      border: 1px solid rgba(255,255,255,0.72);
      backdrop-filter: blur(12px);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 20px;
    }

    .camp-badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 14px;
      border-radius: 999px;
      background: linear-gradient(120deg, #214438, #2d5b4a);
      color: #fdfbf7;
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .camp-badge span.emoji {
      font-size: 1.1rem;
    }

    .hero-title {
      font-family: "Playfair Display", Georgia, "Times New Roman", serif;
      font-size: clamp(2.3rem, 3.1vw, 3rem);
      color: var(--pine);
      line-height: 1.05;
      letter-spacing: 0.02em;
    }

    .hero-sub {
      font-size: 0.96rem;
      color: var(--muted);
      margin-top: 6px;
    }

    .hero-meta {
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--pine-light);
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
.hero-meta a.hero-location-link {
  color: var(--pine-light);
  text-decoration: underline;
  text-decoration-thickness: 1px;
}

.hero-meta a.hero-location-link:hover {
  text-decoration-thickness: 2px;
}

/* Collapsible containers (for totals, balances, paybacks) */
.collapsible {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.25s ease, opacity 0.25s ease;
}

.collapsible.open {
  max-height: 800px; /* large enough for content */
  opacity: 1;
}

/* Cabin-core toggle buttons */
.summary-toggle,
.settlements-toggle {
  border: 1px solid rgba(31,59,50,0.18);
  border-radius: 999px;
  background: #ffffff;
  color: var(--pine-light);
  font-size: 0.78rem;
  padding: 4px 10px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0,0,0,0.06);
  text-decoration: none;
  transition:
    background 0.15s ease,
    box-shadow 0.15s ease,
    transform 0.1s ease,
    border-color 0.15s ease;
}

.summary-toggle:hover,
.settlements-toggle:hover {
  background: linear-gradient(135deg, #fdfbf7, #f3f7fb);
  border-color: rgba(31,59,50,0.35);
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
  transform: translateY(-1px);
}

.summary-toggle:active,
.settlements-toggle:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* little chevron icon */
.toggle-icon {
  font-size: 0.7rem;
  transition: transform 0.2s ease;
}


/* Honoring row (pill + photos) */
.honor-row {
  margin-top: 14px;
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: nowrap; /* keep on one row on desktop */
}

/* Pill/oval badge */
.honor-badge {
  padding: 14px 24px;
  border-radius: 999px; /* pill shape */
  background: #ffffff;
  border: 1px solid rgba(31,59,50,0.08);
  box-shadow: 0 10px 20px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 150px;
}

.honor-label {
  font-size: 0.78rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}

.honor-name {
  margin-top: 2px;
  font-size: 1rem;
  font-weight: 700;
  color: var(--pine);
}

/* Photo strip to the right */
.honor-photos {
  display: flex;
  gap: 10px;
  flex-wrap: nowrap;
}

.honor-photo {
  width: 82px;
  height: 82px;
  border-radius: 10px;
  object-fit: cover;
  box-shadow: 0 2px 5px rgba(0,0,0,0.15);
}

/* Mobile tweaks */
@media (max-width: 700px) {
  .honor-row {
    flex-wrap: wrap;           /* allow wrapping on small screens */
    align-items: flex-start;
  }

  .honor-photos {
    flex-wrap: wrap;
  }

  .honor-photo {
    width: 72px;
    height: 72px;
  }
}

        /* Countdown banner section */
    .countdown-section {
  margin: 10px 0 8px;  /* smaller gap above & below */
}


    .countdown-banner {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 18px;
      padding: 12px 18px;
      border-radius: 18px;
      background: rgba(250, 245, 240, 0.9);
      border: 1px solid rgba(31,59,50,0.12);
      box-shadow: 0 10px 20px rgba(0,0,0,0.06);
    }

    .countdown-banner-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .countdown-label {
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--pine-light);
      font-weight: 700;
    }

    .countdown-note {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .countdown-values {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .count-box {
      min-width: 70px;
      padding: 6px 10px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid rgba(31,59,50,0.08);
      text-align: center;
    }

    .count-box span {
      display: block;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--pine);
      font-variant-numeric: tabular-nums;
      line-height: 1.1;
    }

    .count-box small {
      display: block;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      margin-top: 2px;
    }

    @media (max-width: 680px) {
      .countdown-banner {
        flex-direction: column;
        align-items: flex-start;
      }

      .countdown-values {
        width: 100%;
        justify-content: space-between;
      }
    }

    .hero-meta span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.9);
      border: 1px solid rgba(0,0,0,0.04);
    }

    .hero-cta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
    }

    .btn {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 0.92rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #e27b66);
      color: #fff7f3;
      box-shadow: 0 10px 20px rgba(195, 91, 76, 0.35);
    }

    .btn-secondary {
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(31,59,50,0.12);
      color: var(--pine);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(0,0,0,0.12);
    }

    .btn span.icon {
      font-size: 1rem;
    }

    .hero-illustration {
      position: relative;
      flex: 1;
      min-height: 190px;
      border-radius: 22px;
      overflow: hidden;
      background: radial-gradient(circle at top, #fdfdfd 0, #f3f7fb 32%, #dce7f5 100%);
      border: 1px solid rgba(255,255,255,0.9);
    }

    .hero-inner {
      position: absolute;
      inset: 0;
      padding: 18px 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .sky {
      position: relative;
      height: 46%;
      overflow: hidden;
    }

    .moon {
      position: absolute;
      right: 18px;
      top: 10px;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff8de 0, #f0d48a 42%, #f1c56d 76%);
      box-shadow: 0 0 16px rgba(255,255,255,0.65);
    }

    .snow-dot {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      animation: snow 9s linear infinite;
    }

    .snow-dot:nth-child(1) { width: 4px; height: 4px; left: 6%; top: 12%; animation-delay: 0s; }
    .snow-dot:nth-child(2) { width: 5px; height: 5px; left: 24%; top: 3%; animation-delay: 1.5s; }
    .snow-dot:nth-child(3) { width: 3px; height: 3px; left: 53%; top: 18%; animation-delay: 3s; }
    .snow-dot:nth-child(4) { width: 4px; height: 4px; left: 77%; top: 6%; animation-delay: 4.5s; }
    .snow-dot:nth-child(5) { width: 3px; height: 3px; left: 9%; top: 32%; animation-delay: 6s; }

    @keyframes snow {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(70px); opacity: 0; }
    }

    .tree-line {
      position: absolute;
      bottom: -5px;
      left: 0;
      right: 0;
      height: 60px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 18px;
    }

    .tree {
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 34px solid #294535;
      position: relative;
    }

    .tree::before,
    .tree::after {
      content: "";
      position: absolute;
      left: -14px;
      width: 0;
      height: 0;
      border-left: 14px solid transparent;
      border-right: 14px solid transparent;
    }

    .tree::before {
      bottom: 4px;
      border-bottom: 26px solid #294535;
    }

    .tree::after {
      bottom: 11px;
      border-bottom: 20px solid #294535;
    }

    .cabin {
      position: absolute;
      bottom: 4px;
      left: 16px;
      width: 68px;
      height: 40px;
      background: #754531;
      border-radius: 6px;
      box-shadow: 0 8px 10px rgba(0,0,0,0.2);
    }

    .cabin::before {
      content: "";
      position: absolute;
      left: -10px;
      right: -10px;
      top: -18px;
      border-left: 44px solid transparent;
      border-right: 44px solid transparent;
      border-bottom: 22px solid #42251b;
    }

    .cabin-door {
      position: absolute;
      bottom: 0;
      left: 9px;
      width: 18px;
      height: 24px;
      background: #3d251c;
      border-radius: 4px 4px 0 0;
    }

    .cabin-window {
      position: absolute;
      right: 10px;
      bottom: 12px;
      width: 18px;
      height: 14px;
      background: #ffe3a6;
      border-radius: 4px;
      box-shadow: 0 0 10px rgba(255,227,166,0.8);
    }

    .campfire {
      position: absolute;
      bottom: 2px;
      right: 22px;
      width: 22px;
      height: 18px;
    }

    .flame {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 5px;
      width: 14px;
      height: 18px;
      border-radius: 50% 50% 50% 50%;
      background: radial-gradient(circle at 30% 20%, #ffe3a8 0, #ffb35d 45%, #e85b3b 100%);
      animation: flicker 1.4s ease-in-out infinite;
    }

    .logs {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 20px;
      height: 8px;
    }

    .log {
      position: absolute;
      width: 16px;
      height: 4px;
      background: #5b3724;
      border-radius: 999px;
      top: 2px;
    }

    .log:first-child { transform: rotate(20deg); left: 0; }
    .log:last-child { transform: rotate(-20deg); right: 0; }

    @keyframes flicker {
      0%, 100% { transform: translateX(-50%) scale(1); opacity: 0.96; }
      50% { transform: translateX(-50%) scale(1.1); opacity: 1; }
    }

    .tagline {
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #4c6477;
      margin-bottom: 4px;
    }

    .card-footer-text {
      font-size: 0.8rem;
      color: #4c6477;
    }

    main {
  	margin-top: 12px;  /* was 24px */
  	display: grid;
  	grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
  	gap: 20px;
	}


    section {
      background: var(--snow);
      border-radius: var(--card-radius);
      padding: 18px 16px 20px;
      border: 1px solid rgba(31,59,50,0.06);
    }
/* Give the expenses area its own card look */
#signup {
  margin-bottom: 22px; /* a bit more breathing room above expenses */
}

#budget {
  margin-top: 26px;
  background: #f7fbf4; /* slightly brighter than var(--snow) */
  border-radius: var(--card-radius);
  border: 1px solid rgba(31,59,50,0.10);
  box-shadow: 0 10px 22px rgba(0,0,0,0.05);
}

/* Subtle header line inside the expenses card */
#budget .section-header {
  padding-bottom: 6px;
  margin-bottom: 10px;
  border-bottom: 1px solid rgba(31,59,50,0.08);
}

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
      gap: 10px;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--pine);
    }

    .section-sub {
      font-size: 0.82rem;
      color: var(--muted);
    }

    .day-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 8px;
    }

    .day-card {
      padding: 10px 12px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid rgba(31,59,50,0.06);
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
    }

    .day-name {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--pine-light);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .day-meta {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .timeline {
      margin-top: 4px;
      padding-left: 0;
      list-style: none;
    }

    .timeline li {
      display: grid;
      grid-template-columns: 65px minmax(0, 1fr);
      gap: 8px;
      font-size: 0.86rem;
      padding: 3px 0;
    }

    .timeline-time {
      font-weight: 600;
      color: var(--pine);
    }

    .timeline-text span {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.7rem;
      background: rgba(217,164,65,0.12);
      color: var(--gold);
      margin-top: 2px;
    }

    .note {
      margin-top: 8px;
      font-size: 0.78rem;
      color: var(--muted);
      font-style: italic;
    }

    .budget-helper-text {
      font-size: 0.84rem;
      color: var(--muted);
      margin-top: 4px;
      margin-bottom: 10px;
    }

    .budget-participants {
      margin-top: 10px;
      margin-bottom: 8px;
    }

    #camperNames {
      min-height: 70px;
      font-size: 0.88rem;
    }

    .field-hint {
      font-size: 0.76rem;
      color: var(--muted);
    }

    .budget-helper-text {
      font-size: 0.84rem;
      color: var(--muted);
      margin-top: 4px;
      margin-bottom: 10px;
    }

    .budget-participants {
      margin-top: 10px;
      margin-bottom: 8px;
    }

    #camperNames {
      min-height: 70px;
      font-size: 0.88rem;
    }

    .field-hint {
      font-size: 0.76rem;
      color: var(--muted);
    }

    .expense-form {
      margin-top: 10px;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.7fr) minmax(0, 0.9fr) minmax(0, 0.9fr);
      gap: 10px;
      align-items: flex-end;
    }

    .expense-form .btn {
      justify-self: flex-start;
      margin-top: 4px;
    }

    @media (max-width: 900px) {
      .expense-form {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      }
    }

    @media (max-width: 600px) {
      .expense-form {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .participants-group {
      margin-top: 12px;
    }
.campers-static {
  flex-wrap: wrap;
}

.campers-static .camper-chip {
  background: #ffffff;
  border-radius: 999px;
  padding: 3px 10px;
  border: 1px solid rgba(31,59,50,0.08);
  font-size: 0.8rem;
  color: var(--pine);
}


    .participants-list {
  margin-top: 4px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px 12px;
  padding: 8px 10px;
  border-radius: 10px;
  background: #ffffff;
  border: 1px solid rgba(31,59,50,0.08);
  font-size: 0.84rem;
}

/* label acts as the clickable pill */
.participants-list label.participants-label {
  position: relative;
  display: inline-flex;
  cursor: pointer;
}

/* hide the native checkbox */
.participants-list label.participants-label input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

/* the visible pill */
.participants-toggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 11px;
  border-radius: 999px;
  background: #f3f7fb;
  border: 1px solid rgba(31,59,50,0.18);
  color: var(--pine-light);
  font-size: 0.8rem;
  transition: background 0.15s ease, border 0.15s ease,
              box-shadow 0.15s ease, color 0.15s ease, transform 0.1s ease;
}

/* little ‚Äúlog‚Äù dot on the left */
.participants-toggle .toggle-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(117, 69, 49, 0.4); /* cabin-wood brown */
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.7);
}

/* camper name text */
.participants-toggle .toggle-name {
  white-space: nowrap;
}

/* checked state = cozy pine pill */
.participants-list label.participants-label input[type="checkbox"]:checked + .participants-toggle {
  background: linear-gradient(135deg, #214438, #2d5b4a);
  border-color: rgba(17,40,33,0.9);
  color: #fdfbf7;
  box-shadow: 0 3px 8px rgba(0,0,0,0.25);
  transform: translateY(-1px);
}

/* dot when checked */
.participants-list label.participants-label input[type="checkbox"]:checked + .participants-toggle .toggle-dot {
  background: #f8d99b; /* warm campfire glow */
  box-shadow: 0 0 4px rgba(248,217,155,0.9);
}


    .expense-layout {
      margin-top: 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.9fr);
      gap: 14px;
    }

    @media (max-width: 900px) {
      .expense-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .mini-heading {
      font-size: 0.82rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--pine);
      margin-bottom: 6px;
    }
.settle-line {
  display: flex;
  align-items: baseline;
  gap: 6px;              /* space between name / action / amount */
  padding: 3px 0;
}

.settle-name {
  font-weight: 600;
  color: var(--pine);
}

.settle-action {
  font-size: 0.82rem;
  color: var(--muted);
}

.settle-amount {
  font-variant-numeric: tabular-nums;
}


    #expenseTable {
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid rgba(31,59,50,0.06);
      padding: 8px 10px;
      font-size: 0.86rem;
      max-height: 240px;
      overflow-y: auto;
    }

    .expense-table-empty {
      font-size: 0.82rem;
      color: var(--muted);
    }

    .expense-row {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.7fr) minmax(0, 0.9fr);
      gap: 8px;
      padding: 6px 0;
      border-bottom: 1px solid rgba(31,59,50,0.06);
    }

    .expense-row:last-child {
      border-bottom: none;
    }

    .expense-row-main {
      font-weight: 600;
      color: var(--pine);
    }

    .expense-row-note {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .expense-amount {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .expense-meta {
      text-align: right;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .expense-summary-body {
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid rgba(31,59,50,0.06);
      padding: 8px 10px;
      font-size: 0.86rem;
    }

    .balance-row {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
    }

    .balance-name {
      font-weight: 600;
      color: var(--pine);
    }

    .balance-amount {
      font-variant-numeric: tabular-nums;
    }

    .balance-positive {
      color: var(--pine);
    }

    .balance-negative {
      color: var(--accent);
    }

    form {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--pine-light);
    }

    input, select, textarea {
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(31,59,50,0.16);
      font-family: inherit;
      font-size: 0.9rem;
      outline: none;
      background: #ffffff;
      transition: border 0.15s ease, box-shadow 0.15s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(195,91,76,0.36);
    }

    textarea {
      resize: vertical;
      min-height: 60px;
    }

    .form-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 4px;
      font-size: 0.78rem;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .contrib-intro {
      font-size: 0.84rem;
      color: var(--muted);
      margin-top: 2px;
    }

    .contrib-list {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .contrib-item {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 10px;
      align-items: center;
      background: #ffffff;
      border-radius: 10px;
      padding: 6px 8px;
      border: 1px solid rgba(31,59,50,0.06);
      font-size: 0.84rem;
    }

    .contrib-item span.label-text {
      font-weight: 600;
      color: var(--pine);
    }

    .contrib-item small {
      display: block;
      font-size: 0.74rem;
      color: var(--muted);
      margin-top: 2px;
    }

    footer {
      margin-top: 18px;
      font-size: 0.76rem;
      color: rgba(255,255,255,0.75);
      text-align: center;
    }

    footer span {
      opacity: 0.9;
    }

    @media (max-width: 860px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }

      .hero-illustration {
        width: 100%;
      }

      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 520px) {
      .glass-card {
        padding: 18px 14px 24px;
      }

      .budget-row {
        grid-template-columns: 1.4fr 0.8fr 0.7fr;
        font-size: 0.8rem;
      }

      .hero-cta {
        flex-direction: column;
        align-items: stretch;
      }

      .hero-meta {
        flex-direction: column;
        align-items: flex-start;
      }

      .contrib-item {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .contrib-table {
      margin-top: 12px;
      background: #ffffff;
      border-radius: 14px;
      border: 1px solid rgba(31,59,50,0.10);
      overflow-x: auto;
    }

    .contrib-table table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    .contrib-table th {
      background: #f3f7fb;
      padding: 10px;
      text-align: left;
      font-size: 0.78rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .contrib-table td {
      padding: 10px;
      border-top: 1px solid rgba(31,59,50,0.06);
      color: var(--pine);
      font-size: 0.88rem;
    }

    .contrib-table tr:nth-child(even) {
      background: #fafafa;
    }
    .contrib-table {
      margin-top: 12px;
      border-radius: 14px;
      border: 1px solid rgba(31,59,50,0.10);
      background: #ffffff;
      padding: 8px;
    }

    .contrib-accordion + .contrib-accordion {
      margin-top: 6px;
    }

    .accordion-header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 12px;
      border-radius: 12px;
      background: #f3f7fb;
      border: 1px solid rgba(31,59,50,0.12);
      cursor: pointer;
      font-size: 0.9rem;
      color: var(--pine);
    }

    .accordion-header .cat-label {
      font-weight: 700;
    }

    .accordion-header .pill {
      background: rgba(31,59,50,0.08);
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .accordion-header .chevron {
      transition: transform 0.15s ease;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .contrib-accordion.open .chevron {
      transform: rotate(180deg);
    }

    .accordion-body {
      display: none;
      padding: 8px 4px 4px;
    }

    .contrib-accordion.open .accordion-body {
      display: block;
    }

    .accordion-body table {
      width: 100%;
      border-collapse: collapse;
    }

    .accordion-body th {
      padding: 6px 8px;
      text-align: left;
      font-size: 0.75rem;
      color: var(--muted);
      border-bottom: 1px solid rgba(31,59,50,0.1);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .accordion-body td {
      padding: 6px 8px;
      border-bottom: 1px solid rgba(31,59,50,0.05);
      font-size: 0.88rem;
      color: var(--pine-light);
    }
/* Plaid border around main card */
.glass-card {
  position: relative;
  border: 30px solid transparent;
  border-image: url('plaid.jpg') 30 round; /* replace with your plaid file name */

}

/* Plaid background behind countdown */
.countdown-plaid-bg {
  width: 100%;
  padding: 16px 0;
  background-image: url('plaid.jpg'); /* replace with your plaid image */
  background-size: 600px;  /* keeps pattern subtle */
opacity: 1.0;
  background-repeat: repeat;
  background-position: center;
  border-radius: 16px;
  margin: 0 auto 24px;
  display: flex;
  justify-content: center;
}
/* --- iPhone / small phone tuning --- */
@media (max-width: 600px) {
  .page-wrap {
    padding: 16px 10px 40px;
  }

  /* So the plaid border doesn‚Äôt eat the screen */
  .glass-card {
    border-width: 16px;                 /* was 30px */
    padding: 16px 10px 24px;            /* a bit tighter inside */
    border-radius: 20px;
  }

  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .hero-title {
    font-size: 1.9rem;
    line-height: 1.15;
  }

  .hero-sub {
    font-size: 0.9rem;
  }

  .hero-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }

  .honor-row {
    flex-wrap: wrap;
    gap: 10px;
  }

  .honor-badge {
    padding: 10px 18px;
    min-width: auto;
  }

  .honor-photo {
    width: 68px;
    height: 68px;
  }

  /* Countdown banner: keep it readable but compact */
  .countdown-section {
    margin: 8px 0 10px;
  }

  .countdown-plaid-bg {
    padding: 10px 6px;
    border-radius: 12px;
  }

  .countdown-banner {
    padding: 10px 12px;
    gap: 12px;
  }

  .count-box {
    min-width: 58px;
    padding: 4px 6px;
  }

  .count-box span {
    font-size: 1rem;
  }

  /* Main layout ‚Äì single column, comfortable spacing */
  main {
    margin-top: 12px;
    grid-template-columns: minmax(0, 1fr);
    gap: 16px;
  }

  section {
    padding: 14px 12px 16px;
  }

  .day-card {
    padding: 8px 10px;
  }

  .timeline li {
    grid-template-columns: 60px minmax(0, 1fr);
    font-size: 0.82rem;
  }

  /* Contributions + expenses tighten up a bit */
  .contrib-item {
    grid-template-columns: minmax(0, 1fr);
  }

.summary-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-top: 10px;
}

.summary-toggle {
  border: none;
  background: transparent;
  color: var(--pine-light);
  font-size: 0.78rem;
  text-decoration: underline;
  cursor: pointer;
  padding: 2px 4px;
}


.settlements-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-top: 10px;
}

.settlements-toggle {
  border: none;
  background: transparent;
  color: var(--pine-light);
  font-size: 0.78rem;
  text-decoration: underline;
  cursor: pointer;
  padding: 2px 4px;
}

  .expense-layout {
    grid-template-columns: minmax(0, 1fr);
  }

  .expense-row {
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.8fr);
  }

  .expense-meta {
    text-align: left;
  }

  /* Buttons full width if they start to feel cramped */
  .hero-cta {
    flex-direction: column;
    align-items: stretch;
  }

  .hero-cta .btn {
    justify-content: center;
    width: 100%;
  }

  #signup .form-footer {
    flex-direction: column;
    align-items: flex-start;
  }

  #signup .form-footer .btn {
    width: 100%;
    justify-content: center;
  }
}

/* Extra small (older / smaller iPhones like SE) */
@media (max-width: 400px) {
  .hero-title {
    font-size: 1.7rem;
  }
  .glass-card {
    border-width: 12px;
  }
}

  </style>
</head>
<body>
  <div class="page-wrap">
    <div class="glass-card">
      <header>
        <!-- Banner Image -->
        <div style="width:100%; margin-bottom:20px; text-align:center;">
  <img src="Floral Wreath.png" style="width:100%; max-width:900px; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.15);" />
</div>
  
        <div>
  <h1 class="hero-title">Jenny's Bachelorette Weekend</h1>
  <p class="hero-sub">
    A cozy winter escape in Lake Placid with cabins, cocoa, and just the right amount of chaos.
  </p>

  <!-- Top meta pills -->
  <div class="hero-meta">
    <span>
      <strong>Cabin Location:</strong>
      <a
        href="https://www.google.com/maps/search/?api=1&query=231+John+Brown+Rd.+Lake+Placid+NY+12946"
        target="_blank"
        rel="noopener"
        class="hero-location-link"
      >
        Lake Placid, NY
      </a>
    </span>
    <span><strong>Dates:</strong> <em>January 30 ‚Äì February 1, 2026</em></span>
  </div>

  <!-- Honoring + photos row -->
  <div class="honor-row">
    <div class="honor-badge">
      <div class="honor-label">Honoring</div>
      <div class="honor-name">Jenny</div>
    </div>

    <div class="honor-photos">
      <img src="jrubs4.png" alt="Jenny photo 1" class="honor-photo" />
      <img src="jrubs2.png" alt="Jenny photo 2" class="honor-photo" />
      <img src="jrubs5.png" alt="Jenny photo 3" class="honor-photo" />
       </div>
  </div>

  <div class="hero-cta">
    <a href="#signup" class="btn btn-primary">
      <span class="icon">‚ú®</span>
      Claim what you're bringing
    </a>
    <a href="#itinerary" class="btn btn-secondary">
      <span class="icon">üìú</span>
      View weekend plan
    </a>
  </div>
</div>

      </header>

<!-- Countdown banner section -->
<section class="countdown-section">
  <div class="countdown-plaid-bg">
    <div class="countdown-banner" id="camp-countdown">
    <div class="countdown-banner-left">
      <div class="countdown-label">Countdown to Camp Acey</div>
      <div class="countdown-note" id="cd-note"></div>
    </div>
    <div class="countdown-values">
      <div class="count-box">
        <span id="cd-days">--</span>
        <small>Days</small>
      </div>
      <div class="count-box">
        <span id="cd-hours">--</span>
        <small>Hours</small>
      </div>
      <div class="count-box">
        <span id="cd-mins">--</span>
        <small>Minutes</small>
      </div>
      <div class="count-box">
        <span id="cd-secs">--</span>
        <small>Seconds</small>
</div>
      </div>
    </div>
  </div>
</section>

      <main>
        <!-- Itinerary -->
        <section id="itinerary">
          <div class="section-header">
            <h2 class="section-title">Weekend Itinerary</h2>
            <p class="section-sub">Subject to change if we get snowed in (manifesting ‚ùÑÔ∏è)</p>
          </div>
          <div class="day-list">
            <div class="day-card">
              <div class="day-header">
                <div class="day-name">Friday ‚Ä¢ Arrival &amp; Campfire Night</div>
                <div class="day-meta">Travel + Settling In</div>
              </div>
              <ul class="timeline">
                <li>
                  <div class="timeline-time">4:00 PM</div>
                  <div class="timeline-text">Cabin check-in &amp; spiked hot cocoa bar</div>
                </li>
                <li>
                  <div class="timeline-time">6:30 PM</div>
                  <div class="timeline-text">Welcome dinner (pizza and wings) &amp; Camp Acey introductions <span>Dress: Cozy sweaters, Flannel &amp; faux fur</span></div>
                </li>
                <li>
                  <div class="timeline-time">8:30 PM</div>
                  <div class="timeline-text">Fireside games, toasts &amp; s‚Äômores</div>
                </li>
                <li>
                  <div class="timeline-time">10:30 PM</div>
                  <div class="timeline-text">Pajama party</div>
                </li>
              </ul>
            </div>

            <div class="day-card">
              <div class="day-header">
                <div class="day-name">Saturday ‚Ä¢ Full Camp Acey</div>
                <div class="day-meta">Theme Day: Winter Cabin-Core</div>
              </div>
              <ul class="timeline">
                <li>
                  <div class="timeline-time">8:00 AM</div>
                  <div class="timeline-text">Breakfast, mimosas (and mountains), coffee/tea bar</div>
                </li>
                <li>
                  <div class="timeline-time">9:15 AM</div>
                  <div class="timeline-text">Mirror Lake Inn Spa: Jenny & Abby</div>
                </li>
		<li>
                  <div class="timeline-time">10:00 AM</div>
                  <div class="timeline-text">Mirror Lake Inn Spa: Steph & Andrea</div>
                </li>
		<li>
                  <div class="timeline-time">10:30 AM</div>
                  <div class="timeline-text">Mirror Lake Inn Spa: Chelsea & Nicole</div>
                </li>
		<li>
                  <div class="timeline-time">12:30 AM</div>
                  <div class="timeline-text">Lunch</div>
                </li>
                <li>
                  <div class="timeline-time">2:00 PM</div>
                  <div class="timeline-text">Dog sled rides: Thunder Mountain ($20pp)</div>
                </li>
                <li>
                  <div class="timeline-time">5:30 PM</div>
                  <div class="timeline-text">Get ready: Glam camp photos &amp; cocktails <span>Dress: Flannel &amp; faux fur</span></div>
                </li>
                <li>
                  <div class="timeline-time">7:00 PM</div>
                  <div class="timeline-text">Bachelorette dinner &amp; nighttime festivities - Let‚Äôs get toasted!</div>
                </li>
              </ul>
            </div>

            <div class="day-card">
              <div class="day-header">
                <div class="day-name">Sunday ‚Ä¢ Cozy Goodbyes</div>
                <div class="day-meta">Travel Day</div>
              </div>
              <ul class="timeline">
                <li>
                  <div class="timeline-time">10:30 AM</div>
                  <div class="timeline-text">Cabin checkout</div>
                </li>
                <li>
                  <div class="timeline-time">11:00 AM</div>
                  <div class="timeline-text">Brunch at Big Slide Brewery</div>
                </li>
              </ul>
            </div>
          </div>
          <p class="note">
            ‚úâÔ∏è Final details (packing list, room assignments, carpool info) will be sent closer to the weekend.
          </p>
<section id="all-contributions" style="margin-top: 40px;">
  <div class="section-header">
    <h2 class="section-title">Full Contribution List</h2>
    <p class="section-sub">See everything the Camp Acey crew has signed up to bring.</p>
  </div>

  <div id="all-contrib-table" class="contrib-table">
    Loading contributions‚Ä¶
  </div>
</section>

        </section>

                      <!-- Contributions Sign-Up -->
          <section id="signup" style="margin-top: 16px;">
            <div class="section-header">
              <h2 class="section-title">Camp Acey Contributions</h2>
              <p class="section-sub">
                Claim what you‚Äôre bringing so we have the perfect mix of snacks, drinks &amp; cozy cabin goodies.
              </p>
            </div>

            <p class="contrib-intro">
              Please add your name next to 1‚Äì3 items you‚Äôre willing to bring. Everyone will be able to see this list update,
              so we all know who‚Äôs bringing what up front.
            </p>

            <form id="camp-form" action="#" method="post" onsubmit="handleFormSubmit(event)">
              <div class="field-group">
  <label for="name">Your Name</label>
  <select id="name" name="name" required>
    <option value="">Select your name</option>
    <!-- Options will be filled by JS from CAMPERS -->
  </select>
</div>

              <div class="field-group">
                <label>Claim your items</label>
                <div class="contrib-list">
                  <!-- Snacks & chips -->
                  <div class="contrib-item" data-category="Snacks & chips">
                    <div>
                      <span class="label-text">Snacks &amp; chips</span>
                      <small>Think salty, crunchy, munchy.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="snacks" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Desserts / sweet treats -->
                  <div class="contrib-item" data-category="Desserts / sweet treats">
                    <div>
                      <span class="label-text">Desserts / sweet treats</span>
                      <small>Cookies, brownies, cupcakes, etc.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="desserts" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Charcuterie / cheese board -->
                  <div class="contrib-item" data-category="Charcuterie / cheese board">
                    <div>
                      <span class="label-text">Charcuterie / cheese board</span>
                      <small>Cheese, meats, crackers, jams, etc.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="charcuterie" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Breakfast & brunch items -->
                  <div class="contrib-item" data-category="Breakfast & brunch items">
                    <div>
                      <span class="label-text">Breakfast &amp; brunch items</span>
                      <small>Bagels, pastries, egg bake, fruit, etc.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="breakfast" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Beer/Wine/Liquor -->
                  <div class="contrib-item" data-category="Beer/Wine/Liquor">
                    <div>
                      <span class="label-text">Beer/Wine/Liquor</span>
                      <small>Beer, wine, spirits, special bottles.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="alcohol" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- NA Beverages / mixers -->
                  <div class="contrib-item" data-category="NA Beverages / mixers">
                    <div>
                      <span class="label-text">NA Beverages / mixers</span>
                      <small>Seltzers, juices, mocktails, mixers.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="na" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Coffee & tea station -->
                  <div class="contrib-item" data-category="Coffee & tea station">
                    <div>
                      <span class="label-text">Coffee &amp; tea station</span>
                      <small>Coffee, filters, creamers, syrups, tea.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="coffee" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Game/Activity -->
                  <div class="contrib-item" data-category="Game/Activity">
                    <div>
                      <span class="label-text">Game/Activity</span>
                      <small>Board games, card games, bachelorette games.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="game" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Decor & ambiance -->
                  <div class="contrib-item" data-category="Decor & ambiance">
                    <div>
                      <span class="label-text">Decor &amp; ambiance</span>
                      <small>Banners, candles, fairy lights, bride swag.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="decor" placeholder="What you‚Äôll bring" />
                  </div>

                  <!-- Other Item -->
                  <div class="contrib-item" data-category="Other Item">
                    <div>
                      <span class="label-text">Other Item</span>
                      <small>Anything fun or helpful that doesn‚Äôt fit above.</small>
                      <div class="contrib-names"></div>
                    </div>
                    <input type="text" name="otherItem" placeholder="What you‚Äôll bring" />
                  </div>
                </div>
              </div>

              
              <div class="form-footer">
                <button type="submit" class="btn btn-primary">
                  <span class="icon">üì¨</span>
                  Submit my contributions
                </button>
                <div>
                  This list updates live so everyone can see who‚Äôs bringing what.
                </div>
              </div>
                        </form>
          </section> <!-- closes #signup -->

    <!-- Budget & Sign Up -->
        <div>
          <!-- Budget -->
          <section id="budget">

  <div class="section-header">
    <h2 class="section-title">Shared Expenses</h2>
    <p class="section-sub">
      Add Ubers, meals, drinks &amp; more. We‚Äôll split each expense between only the girls who participated so the right camper is reimbursed.
    </p>
  </div>

  <p class="budget-helper-text">
    Start by listing everyone on the trip, then add each expense as it happens. Balances update automatically.
  </p>

      <!-- Participants selection (now in place of the camper list) -->
  <div class="budget-participants">
    <div class="field-group participants-group">
      <label>Who participated in this expense?</label>

      <div id="expenseParticipantsWrapper">
        <div id="expenseParticipants" class="participants-list">
          <!-- JS will fill this with camper toggles -->
          <small class="field-hint">
            Toggle the campers below to include them in this expense. 
            If no one is selected, we‚Äôll split it between everyone.
          </small>
        </div>
      </div>

      <!-- Select / Unselect all toggle -->
      <div id="toggleAllParticipants"
           style="margin-top:6px; font-size:0.8rem; color:var(--pine-light); cursor:pointer; text-decoration:underline;">
        Select all
      </div>
    </div>
  </div>



  <!-- Add expense form -->
  <div class="expense-form">
    <div class="field-group">
      <label for="expenseDesc">Expense</label>
      <input id="expenseDesc" type="text"
             placeholder="Dinner at Smoke Signals, Uber to cabin, drinks, etc." />
    </div>

    <div class="field-group">
      <label for="expenseAmount">Amount</label>
      <input id="expenseAmount" type="number" min="0" step="0.01" placeholder="0.00" />
    </div>

    <div class="field-group">
      <label for="expenseCategory">Category</label>
      <select id="expenseCategory">
        <option value="">Select category</option>
        <option value="Uber / Lyft">Uber / Lyft</option>
        <option value="Meals">Meals</option>
        <option value="Drinks">Drinks</option>
        <option value="Other">Other</option>
      </select>
    </div>

    <div class="field-group">
      <label for="expensePayer">Paid by</label>
      <select id="expensePayer">
        <option value="">Select camper</option>
      </select>
    </div>

    <div class="field-group">
      <label for="expenseNotes">Notes (optional)</label>
      <input id="expenseNotes" type="text" placeholder="Tip, cash bar, tickets, etc." />
    </div>

    <button type="button" class="btn btn-secondary" id="addExpenseBtn">
      <span class="icon">‚ûï</span> Add expense
    </button>
  </div>

  </div>

  <!-- Expenses + summary -->
  <div class="expense-layout">
    <div class="expense-list">
      <h3 class="mini-heading">All expenses</h3>
      <div id="expenseTable" class="expense-table-empty">
        No expenses added yet.
      </div>
    </div>
   <div class="expense-summary">
  <!-- Running Totals Header + Toggle -->
  <div class="summary-header">
    <h3 class="mini-heading">Running totals</h3>
    <button type="button" id="toggleTotals" class="summary-toggle">
      <span class="toggle-label">Show</span>
      <span class="toggle-icon">‚ñæ</span>
    </button>
  </div>

  <div id="totalsContainer" class="collapsible">
    <div id="expenseTotals" class="expense-summary-body" style="margin-bottom:8px;">
      Add campers and expenses to see totals.
    </div>
  </div>

  <!-- Per-Person Balances Header + Toggle -->
  <div class="summary-header" style="margin-top:12px;">
    <h3 class="mini-heading">Per-person balances</h3>
    <button type="button" id="toggleBalances" class="summary-toggle">
      <span class="toggle-label">Show</span>
      <span class="toggle-icon">‚ñæ</span>
    </button>
  </div>

  <div id="balancesContainer" class="collapsible">
    <div id="expenseSummary" class="expense-summary-body" style="margin-bottom:8px;">
      Add campers and expenses to see balances.
    </div>
  </div>

  <!-- Suggested paybacks header + toggle -->
  <div class="settlements-header">
    <h3 class="mini-heading" style="margin-top:10px;">Suggested paybacks</h3>
    <button type="button" id="toggleSettlements" class="settlements-toggle">
      <span class="toggle-label">Show</span>
      <span class="toggle-icon">‚ñæ</span>
    </button>
  </div>

  <div id="expenseSettlements" class="expense-summary-body collapsible">
    Add campers and expenses to see who should pay whom.
  </div>
</div>



  </div>
</section>

       </div> <!-- closes the Budget & Sign Up wrapper div -->
      </main>

      <footer>
        <span>Camp Acey ‚Ä¢ Lake Placid Bachelorette Weekend ‚Ä¢ "What happens at the cabin stays at the cabin."</span>
      </footer>
    </div> <!-- .glass-card -->
  </div> <!-- .page-wrap -->

  <script>
  // Google Apps Script URLs
  const EXPENSES_API_URL = 'https://script.google.com/macros/s/AKfycbzmpirhYyKccwVPxtNrX63CmyG5S5e5hbFrSnp1Fl-f-zGO1vzHo7cGfqTJHXR6xlzS7w/exec';
  const API_URL = 'https://script.google.com/macros/s/AKfycbz5xQCKgyL7_b4mPgPYlFQQMbF_iHuuqwnu9gdeCHgHyrVWB3SZSWNCXANWo4APRIiQFg/exec';

  // ---------- Contributions (what people are bringing) ----------

  // Map form field names -> category strings (must match your Sheet picklist)
  const CATEGORY_MAP = {
    snacks: 'Snacks & chips',
    desserts: 'Desserts / sweet treats',
    charcuterie: 'Charcuterie / cheese board',
    breakfast: 'Breakfast & brunch items',
    alcohol: 'Beer/Wine/Liquor',
    na: 'NA Beverages / mixers',
    coffee: 'Coffee & tea station',
    game: 'Game/Activity',
    decor: 'Decor & ambiance',
    otherItem: 'Other Item'
  };

  // Category display labels (no emojis)
  const CATEGORY_INFO = {
    'Snacks & chips':            { label: 'Snacks & chips' },
    'Desserts / sweet treats':   { label: 'Desserts / sweet treats' },
    'Charcuterie / cheese board':{ label: 'Charcuterie / cheese board' },
    'Breakfast & brunch items':  { label: 'Breakfast & brunch items' },
    'Beer/Wine/Liquor':          { label: 'Beer/Wine/Liquor' },
    'NA Beverages / mixers':     { label: 'NA Beverages / mixers' },
    'Coffee & tea station':      { label: 'Coffee & tea station' },
    'Game/Activity':             { label: 'Game/Activity' },
    'Decor & ambiance':          { label: 'Decor & ambiance' },
    'Other Item':                { label: 'Other Item' }
  };

  // Force categories to appear in the correct order
  const CATEGORY_ORDER = [
    'Snacks & chips',
    'Desserts / sweet treats',
    'Charcuterie / cheese board',
    'Breakfast & brunch items',
    'Beer/Wine/Liquor',
    'NA Beverages / mixers',
    'Coffee & tea station',
    'Game/Activity',
    'Decor & ambiance',
    'Other Item'
  ];

  async function fetchContributions() {
    try {
      const res = await fetch(API_URL);
      const data = await res.json();
      renderContributions(data.items || []);
    } catch (err) {
      console.error('Error loading contributions', err);
    }
  }

  function renderContributions(items) {
    // 1) Update the per-category ‚ÄúAlready bringing‚Äù lines
    const grouped = {};
    (items || []).forEach(item => {
      const cat = item.category;
      if (!grouped[cat]) grouped[cat] = [];
      grouped[cat].push(item);
    });

    document.querySelectorAll('.contrib-item').forEach(block => {
      const cat = block.getAttribute('data-category');
      const namesDiv = block.querySelector('.contrib-names');
      if (!namesDiv) return;

      const list = grouped[cat] || [];
      if (list.length === 0) {
        namesDiv.textContent = 'No one has claimed this yet.';
        namesDiv.style.fontSize = '0.78rem';
        namesDiv.style.color = '#6b7a86';
      } else {
        const names = list
          .map(i => i.name + (i.description ? ` (${i.description})` : ''))
          .join(', ');
        namesDiv.textContent = 'Already bringing: ' + names;
        namesDiv.style.fontSize = '0.78rem';
        namesDiv.style.color = '#1f3b32';
      }
    });

    // 2) Build grouped, collapsible full contributions list
    const tableDiv = document.getElementById('all-contrib-table');
    if (tableDiv) {
      if (!items || items.length === 0) {
        tableDiv.innerHTML = "<p>No contributions yet ‚Äî be the first one! üèïÔ∏è</p>";
      } else {
        // Group items by category
        const byCategory = {};
        items.forEach(i => {
          if (!byCategory[i.category]) byCategory[i.category] = [];
          byCategory[i.category].push(i);
        });

        // Sort items within each category by name, then description
        Object.keys(byCategory).forEach(cat => {
          byCategory[cat].sort((a, b) => {
            const nameCmp = (a.name || '').localeCompare(b.name || '');
            if (nameCmp !== 0) return nameCmp;
            return (a.description || '').localeCompare(b.description || '');
          });
        });

        // Order categories using CATEGORY_ORDER, fallback for any extras
        const catsInData = Object.keys(byCategory);
        const orderedCats = CATEGORY_ORDER.filter(cat => catsInData.includes(cat));
        catsInData.forEach(cat => {
          if (!orderedCats.includes(cat)) orderedCats.push(cat);
        });

        let html = '';

        orderedCats.forEach(cat => {
          const list = byCategory[cat];
          if (!list || list.length === 0) return;

          const label = CATEGORY_INFO[cat]?.label || cat;
          const groupId = 'cat-' + cat.toLowerCase().replace(/[^a-z0-9]+/g, '-');

          html += `
            <div class="contrib-accordion">
              <button class="accordion-header" data-target="${groupId}">
                <span class="cat-label">${label}</span>
                <span class="pill">${list.length}</span>
                <span class="chevron">‚ñæ</span>
              </button>
              <div class="accordion-body" id="${groupId}">
                <table>
                  <tr>
                    <th>Name</th>
                    <th>Item</th>
                  </tr>
                  ${list.map(i => `
                    <tr>
                      <td>${i.name || ''}</td>
                      <td>${i.description || ''}</td>
                    </tr>
                  `).join('')}
                </table>
              </div>
            </div>
          `;
        });

        tableDiv.innerHTML = html;
        attachAccordions();
      }
    }
  }

  async function handleFormSubmit(event) {
    event.preventDefault();

    const form = event.target;
    const name = form.name.value.trim();
    
    if (!name) {
      alert('Please add your name.');
      return;
    }

    // Build items array from non-empty inputs
    const items = [];
    Object.keys(CATEGORY_MAP).forEach(fieldName => {
      const input = form.querySelector(`[name="${fieldName}"]`);
      if (!input) return;
      const desc = input.value.trim();
      if (desc) {
        items.push({
          category: CATEGORY_MAP[fieldName],
          description: desc
        });
      }
    });

    if (items.length === 0) {
      alert('Please claim at least one item to bring.');
      return;
    }

    try {
      // Send as URL-encoded so it matches the Apps Script doPost handler
      const body = new URLSearchParams({
        payload: JSON.stringify({ name, items })
      });

      const res = await fetch(API_URL, {
        method: 'POST',
        body
      });

      const data = await res.json();

      if (data.status === 'success') {
        alert('Thanks for claiming your items for Camp Acey! üèïÔ∏è');
        form.reset();
        fetchContributions(); // refresh visible list
      } else {
        console.error(data);
        alert('There was an issue saving your contributions. Please try again.');
      }
    } catch (err) {
      console.error(err);
      alert('There was an error connecting to the server. Please try again.');
    }
  }

  // Handles opening/closing accordion sections
  function attachAccordions() {
    document.querySelectorAll('.accordion-header').forEach(btn => {
      btn.onclick = () => {
        const group = btn.closest('.contrib-accordion');
        if (!group) return;

        const open = group.classList.contains('open');
        if (open) {
          group.classList.remove('open');
        } else {
          group.classList.add('open');
        }
      };
    });
  }

  // ---------- Countdown ----------

  const CAMP_START = new Date('2026-01-30T16:00:00'); // adjust time if you want

  function updateCountdown() {
    const container = document.getElementById('camp-countdown');
    if (!container) return;

    const now = new Date();
    let diff = CAMP_START - now;

    const noteEl = document.getElementById('cd-note');

    // If we've passed the start date
    if (diff <= 0) {
      if (noteEl) {
        noteEl.textContent = 'Camp Acey is happening now or has already wrapped! üíç';
      }
      ['cd-days','cd-hours','cd-mins','cd-secs'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.textContent = '0';
      });
      return;
    }

    const secondsTotal = Math.floor(diff / 1000);
    const days = Math.floor(secondsTotal / (60 * 60 * 24));
    const hours = Math.floor((secondsTotal % (60 * 60 * 24)) / (60 * 60));
    const mins = Math.floor((secondsTotal % (60 * 60)) / 60);
    const secs = secondsTotal % 60;

    const dEl = document.getElementById('cd-days');
    const hEl = document.getElementById('cd-hours');
    const mEl = document.getElementById('cd-mins');
    const sEl = document.getElementById('cd-secs');

    if (dEl) dEl.textContent = String(days);
    if (hEl) hEl.textContent = String(hours).padStart(2, '0');
    if (mEl) mEl.textContent = String(mins).padStart(2, '0');
    if (sEl) sEl.textContent = String(secs).padStart(2, '0');

    if (noteEl) {
      if (days <= 3) {
        noteEl.textContent = 'Pack your bags! Camp Acey is almost here. üß£üî•';
      } else {
        noteEl.textContent = 'Time to plan outfits, snacks, and shenanigans. ‚ú®';
      }
    }
  }

  function startCountdown() {
    updateCountdown();
    setInterval(updateCountdown, 1000);
  }

  // ---------- Shared trip expenses (Google Sheet‚Äìbacked) ----------
// Fixed list of campers for the whole weekend
const CAMPERS = [
  'Jenny',
  'Andrea',
  'Steph',
  'Abby',
  'Lindsay',
  'Jamie',
  'Nicole',
  'Chelsea',
  'Danni',
  'Missy',
  'Alexa'
];
function initCamperNameDropdown() {
  const select = document.getElementById('name');
  if (!select) return;

  // Base "placeholder" option
  select.innerHTML = '<option value="">Select your name</option>' +
    CAMPERS.map(name => `<option value="${name}">${name}</option>`).join('');
}

  let expenses = [];

  function getCampers() {
  // Always use the fixed list
  return CAMPERS;
}


  function refreshPayerAndParticipants() {
    const campers = getCampers();

    // Payer dropdown
    const select = document.getElementById('expensePayer');
    if (select) {
      const current = select.value;
      select.innerHTML = '<option value="">Select camper</option>';
      campers.forEach(name => {
        const opt = document.createElement('option');
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      });
      if (campers.includes(current)) {
        select.value = current;
      }
    }
  // Participants checkboxes (cabin-style toggles)
const container = document.getElementById('expenseParticipants');
if (container) {
  if (campers.length === 0) {
    container.innerHTML = '<small class="field-hint">Add campers above to choose participants.</small>';
    return;
  }

  container.innerHTML = campers.map(name => `
    <label class="participants-label">
      <input type="checkbox" value="${name}">
      <span class="participants-toggle">
        <span class="toggle-dot"></span>
        <span class="toggle-name">${name}</span>
      </span>
    </label>
  `).join('');
}
}
  
function renderExpensesAndBalances() {
  const tableDiv       = document.getElementById('expenseTable');
  const summaryDiv     = document.getElementById('expenseSummary');
  const totalsDiv      = document.getElementById('expenseTotals');
  const settlementsDiv = document.getElementById('expenseSettlements');
  const campers        = getCampers();

  if (!tableDiv || !summaryDiv) return;

  // ----- Expense list (left column) -----
  if (!expenses.length) {
    tableDiv.textContent = 'No expenses added yet.';
  } else {
    const rowsHtml = expenses.map((exp, idx) => `
      <div class="expense-row">
        <div>
          <div class="expense-row-main">${exp.desc}</div>
          <div class="expense-row-note">
            ${exp.category ? exp.category + ' ‚Ä¢ ' : ''}Participants: ${exp.participants.join(', ')}
            ${exp.note ? ' ‚Ä¢ ' + exp.note : ''}
          </div>
        </div>
        <div class="expense-amount">$${exp.amount.toFixed(2)}</div>
        <div class="expense-meta">
          Paid by ${exp.payer}
          <button
            type="button"
            class="expense-remove"
            data-expense-index="${idx}"
          >
            Remove
          </button>
        </div>
      </div>
    `).join('');

    tableDiv.innerHTML = rowsHtml;

    // Attach click handlers for the remove buttons
    document.querySelectorAll('.expense-remove').forEach(btn => {
      btn.addEventListener('click', async () => {
        const idx = Number(btn.dataset.expenseIndex);
        const exp = expenses[idx];
        if (!exp) return;

        const ok = confirm('Remove this expense from the trip?');
        if (!ok) return;

        const result = await deleteExpenseFromSheet(exp);
        if (!result.ok) {
          alert('There was a problem removing this expense. Please try again.');
          return;
        }

        // Remove locally and re-render
        expenses.splice(idx, 1);
        renderExpensesAndBalances();
      });
    });
  }

  // If no campers OR no expenses, show defaults on the right and stop
  if (!campers.length || !expenses.length) {
    if (summaryDiv) {
      summaryDiv.textContent = 'Add campers and expenses to see balances.';
    }
    if (totalsDiv) {
      totalsDiv.textContent = 'Add campers and expenses to see totals.';
    }
    if (settlementsDiv) {
      settlementsDiv.textContent = 'Add campers and expenses to see who should pay whom.';
    }
    return;
  }

  // ----- Running totals (top box in right column) -----
  const grandTotal = expenses.reduce((sum, exp) => sum + (exp.amount || 0), 0);

  // How much each camper has paid in total
  const paidTotals = {};
  campers.forEach(name => (paidTotals[name] = 0));
  expenses.forEach(exp => {
    if (exp.payer && paidTotals.hasOwnProperty(exp.payer)) {
      paidTotals[exp.payer] += exp.amount || 0;
    }
  });

  const avgPerCamper = grandTotal / campers.length;

  if (totalsDiv) {
    const totalsHtml = `
      <div style="margin-bottom:6px;">
        <strong>Total spent so far:</strong> $${grandTotal.toFixed(2)}
      </div>
      <div style="margin-bottom:10px; font-size:0.8rem; color:#6b7a86;">
        If everything were split evenly between all campers, that would be
        about <strong>$${avgPerCamper.toFixed(2)}</strong> per person.
      </div>
      <div style="margin-bottom:4px; font-size:0.8rem; color:#6b7a86;">
        Paid so far:
      </div>
      ${campers.map(name => {
        const paid = paidTotals[name] || 0;
        return `
          <div class="balance-row">
            <span class="balance-name">${name}</span>
            <span class="balance-amount">$${paid.toFixed(2)} paid</span>
          </div>
        `;
      }).join('')}
    `;
    totalsDiv.innerHTML = totalsHtml;
  }

  // ----- Per-person net balances (middle box: "who owes who") -----
  const balances = {};
  campers.forEach(name => (balances[name] = 0));

  // Build balances from scratch:
  //  - each participant owes share = amount / participants.length
  //  - payer is credited with the full amount they fronted
  expenses.forEach(exp => {
    if (!exp || !exp.payer || !(exp.amount > 0)) return;

    // Explicit participants list, or everyone if missing
    let participants =
      Array.isArray(exp.participants) && exp.participants.length
        ? exp.participants.slice()
        : campers.slice();

    // Make sure the payer is included in the split
    if (!participants.includes(exp.payer)) {
      participants.push(exp.payer);
    }

    const share = exp.amount / participants.length;

    // Everyone in participants owes `share`
    participants.forEach(name => {
      if (balances[name] !== undefined) {
        balances[name] -= share;
      }
    });

    // Payer actually paid the whole bill
    if (balances[exp.payer] !== undefined) {
      balances[exp.payer] += exp.amount;
    }
  });

  // Render "who owes who" list
  const summaryRows = campers.map(name => {
    const raw = balances[name] || 0;
    const val = Math.round(raw * 100) / 100; // round to cents
    let actionText;
    let amountText = '';

    if (val > 0.01) {
      actionText = 'should receive';
      amountText = `$${val.toFixed(2)}`;
    } else if (val < -0.01) {
      actionText = 'should pay';
      amountText = `$${Math.abs(val).toFixed(2)}`;
    } else {
      actionText = 'is all settled up';
    }

    const amountClass =
      'settle-amount ' + (val >= 0 ? 'balance-positive' : 'balance-negative');

    return `
      <div class="balance-row settle-line">
        <span class="settle-name">${name}</span>
        <span class="settle-action">${actionText}</span>
        ${
          amountText
            ? `<span class="${amountClass}">${amountText}</span>`
            : ''
        }
      </div>
    `;
  }).join('');

  summaryDiv.innerHTML = summaryRows;

  // ----- Settlement suggestions (bottom box, R-style pairwise netting) -----
  if (settlementsDiv) {
    // 1) Build pairwise "from owes to" totals (like event_splits/pay in R)
    const pairOwes = {};
    const safeCampers = campers.slice();

    expenses.forEach(exp => {
      if (!exp || !exp.payer || !(exp.amount > 0)) return;

      // Explicit participants, or everyone if missing
      let participants =
        Array.isArray(exp.participants) && exp.participants.length
          ? exp.participants.slice()
          : safeCampers.slice();

      // Make sure payer is included in split
      if (!participants.includes(exp.payer)) {
        participants.push(exp.payer);
      }

      const share = exp.amount / participants.length;

      // Every participant except payer owes `share` to payer
      participants.forEach(fromName => {
        if (fromName === exp.payer) return; // no self-debt

        if (!pairOwes[fromName]) {
          pairOwes[fromName] = {};
        }
        if (!pairOwes[fromName][exp.payer]) {
          pairOwes[fromName][exp.payer] = 0;
        }

        pairOwes[fromName][exp.payer] += share;
      });
    });

    // 2) Net out flips: for each pair (from, to),
    //    net = max( pay(from->to) - pay(to->from), 0 )
    const settlements = [];

    safeCampers.forEach(fromName => {
      safeCampers.forEach(toName => {
        if (fromName === toName) return;

        const pay =
          (pairOwes[fromName] && pairOwes[fromName][toName]) || 0;
        const flip =
          (pairOwes[toName] && pairOwes[toName][fromName]) || 0;

        const net = Math.round((pay - flip) * 100) / 100;

        if (net > 0.01) {
          settlements.push({
            from: fromName,
            to: toName,
            amount: net
          });
        }
      });
    });

    if (!settlements.length) {
      settlementsDiv.textContent = 'Everyone is all settled up. üéâ';
      return;
    }

    const settlementsHtml = `
      <div style="margin-bottom:6px; font-size:0.8rem; color:#6b7a86;">
        These are direct paybacks after canceling out overlapping expenses:
      </div>
      ${settlements.map(s => `
        <div class="balance-row settle-line">
          <span class="settle-name">${s.from}</span>
          <span class="settle-action">pays</span>
          <span class="settle-name">${s.to}</span>
          <span class="settle-amount balance-negative">$${s.amount.toFixed(2)}</span>
        </div>
      `).join('')}
    `;

    settlementsDiv.innerHTML = settlementsHtml;
  }
}


  async function loadExpensesFromSheet() {
    if (!EXPENSES_API_URL) return;
    try {
      const res = await fetch(EXPENSES_API_URL);
      const data = await res.json();
      expenses = (data.items || []).map(item => ({
        desc: item.desc,
        amount: Number(item.amount) || 0,
        category: item.category || '',
        payer: item.payer || '',
        participants: item.participants || [],
        note: item.note || ''
      }));
      renderExpensesAndBalances();
    } catch (err) {
      console.error('Error loading expenses', err);
    }
  }

async function addExpenseToSheet(expense) {
  if (!EXPENSES_API_URL) return { ok: false };

  try {
    const body = new URLSearchParams({
      payload: JSON.stringify({
        type: 'addExpense',
        expense
      })
    });

    const res = await fetch(EXPENSES_API_URL, {
      method: 'POST',
      body
    });

    const data = await res.json();

    if (data.status === 'success') {
      return { ok: true };
    } else {
      console.error('Error from API', data);
      return { ok: false, error: data.message };
    }
  } catch (err) {
    console.error('Network error', err);
    return { ok: false, error: 'Network error' };
  }
}

 function initBudgetTracker() {
  const addBtn = document.getElementById('addExpenseBtn');
  if (!addBtn) return;

  // Show the fixed camper list in the "Campers" area
  const camperDisplay = document.getElementById('camperNamesDisplay');
  if (camperDisplay) {
    camperDisplay.innerHTML = CAMPERS
      .map(name => `<span class="camper-chip">${name}</span>`)
      .join('');
  }

  // Build payer dropdown + participant checkboxes from CAMPERS
  refreshPayerAndParticipants();

  // Load any existing expenses from the Google Sheet
  loadExpensesFromSheet();

  // Add new expense handler
  addBtn.addEventListener('click', async () => {
    const descInput = document.getElementById('expenseDesc');
    const amountInput = document.getElementById('expenseAmount');
    const categorySelect = document.getElementById('expenseCategory');
    const payerSelect = document.getElementById('expensePayer');
    const notesInput = document.getElementById('expenseNotes');
    const participantsContainer = document.getElementById('expenseParticipants');

    const desc = descInput.value.trim();
    const amount = parseFloat(amountInput.value);
    const category = categorySelect.value;
    const payer = payerSelect.value;
    const note = notesInput.value.trim();
    const campers = getCampers();

    if (!desc) {
      alert('Please add a short description for the expense.');
      return;
    }
    if (!(amount > 0)) {
      alert('Please enter an amount greater than 0.');
      return;
    }
    if (!category) {
      alert('Please choose a category.');
      return;
    }
    if (!payer) {
      alert('Please select who paid for this.');
      return;
    }
    if (!campers.includes(payer)) {
      alert('The payer must be in the camper list.');
      return;
    }
    if (!campers.length) {
      alert('Please define at least one camper.');
      return;
    }

    let participants = [];
    if (participantsContainer) {
      participants = Array.from(
        participantsContainer.querySelectorAll('input[type="checkbox"]:checked')
      ).map(cb => cb.value);
    }
    if (!participants.length) {
      // If none checked, assume all campers participated
      participants = [...campers];
    }

    const expense = { desc, amount, category, payer, note, participants };

    const result = await addExpenseToSheet(expense);
    if (!result.ok) {
      alert('There was a problem saving this expense. Please try again.');
      return;
    }

    // Add to local list and refresh
    expenses.push(expense);

    // Clear inputs (keep campers & checkboxes)
    descInput.value = '';
    amountInput.value = '';
    notesInput.value = '';
    categorySelect.value = '';

    renderExpensesAndBalances();
  });
}


  // ---------- Init on page load ----------
function initSelectAllParticipants() {
  const toggle = document.getElementById("toggleAllParticipants");

  if (!toggle) return;

  toggle.addEventListener("click", () => {
    const checkboxes = document.querySelectorAll('#expenseParticipants input[type="checkbox"]');
    const allChecked = Array.from(checkboxes).every(cb => cb.checked);

    if (allChecked) {
      // Unselect all
      checkboxes.forEach(cb => cb.checked = false);
      toggle.textContent = "Select all";
    } else {
      // Select all
      checkboxes.forEach(cb => cb.checked = true);
      toggle.textContent = "Unselect all";
    }
  });
}

function setupToggle(buttonId, containerId) {
  const btn = document.getElementById(buttonId);
  const box = document.getElementById(containerId);
  if (!btn || !box) return;

  // Ensure we start collapsed
  box.classList.remove('open');
  const labelSpan = btn.querySelector('.toggle-label');
  const iconSpan = btn.querySelector('.toggle-icon');

  if (labelSpan) labelSpan.textContent = 'Show';
  if (iconSpan) iconSpan.style.transform = 'rotate(0deg)';

  btn.addEventListener('click', () => {
    const isOpen = box.classList.contains('open');

    if (isOpen) {
      box.classList.remove('open');
      if (labelSpan) labelSpan.textContent = 'Show';
      if (iconSpan) iconSpan.style.transform = 'rotate(0deg)';
    } else {
      box.classList.add('open');
      if (labelSpan) labelSpan.textContent = 'Hide';
      if (iconSpan) iconSpan.style.transform = 'rotate(180deg)';
    }
  });
}


function initWhoOwesToggle() {
  const btn = document.getElementById('toggleWhoOwes');
  const box = document.getElementById('whoOwesContainer'); // üëà toggle the wrapper

  if (!btn || !box) return;

  btn.addEventListener('click', () => {
    const isHidden = box.style.display === 'none';

    // toggle visibility for BOTH totals + balances
    box.style.display = isHidden ? '' : 'none';

    // update button text
    btn.textContent = isHidden ? 'Hide' : 'Show';
  });
}



  document.addEventListener('DOMContentLoaded', () => {
  fetchContributions();
  initBudgetTracker();
  startCountdown();
  initSelectAllParticipants();
 
  // New toggles with animation
  setupToggle('toggleTotals', 'totalsContainer');
  setupToggle('toggleBalances', 'balancesContainer');
  setupToggle('toggleSettlements', 'expenseSettlements');
});
</script>
</body>
</html>
